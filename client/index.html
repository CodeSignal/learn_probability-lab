<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>CodeSignal Probability Lab</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Fonts (Work Sans) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Design System Foundations -->
  <link rel="stylesheet" href="./design-system/colors/colors.css">
  <link rel="stylesheet" href="./design-system/spacing/spacing.css">
  <link rel="stylesheet" href="./design-system/typography/typography.css">

  <!-- Design System Components -->
  <link rel="stylesheet" href="./design-system/components/button/button.css">
  <link rel="stylesheet" href="./design-system/components/boxes/boxes.css">
  <link rel="stylesheet" href="./design-system/components/input/input.css">
  <link rel="stylesheet" href="./design-system/components/dropdown/dropdown.css">
  <link rel="stylesheet" href="./design-system/components/tags/tags.css">
  <link rel="stylesheet" href="./design-system/components/modal/modal.css">

  <link rel="stylesheet" href="./app.css" />
</head>
<body class="bespoke">
  <!-- Navigation Header -->
  <header class="header">
    <h1 class="heading-small">CodeSignal Probability Lab</h1>
    <div class="spacer"></div>
    <div id="status" class="status heading-small">Ready</div>
    <button id="btn-help" class="button button-text">Help</button>
  </header>

  <!-- Main Application Content -->
  <main class="main-layout" id="probability-lab">
    <aside class="sidebar">
      <section class="box card">
        <h2>Experiment</h2>

        <div id="pl-single-config">
          <div id="pl-spinner-options" hidden>
            <label>
              Spinner sectors
              <select id="pl-spinner-sectors" class="input">
                <option value="4">4</option>
                <option value="6">6</option>
                <option value="8" selected>8</option>
              </select>
            </label>
          </div>

          <div id="pl-bias-options"></div>
        </div>

        <div id="pl-two-config" hidden>
          <div class="pl-two-config-grid">
            <div class="pl-two-config-column">
              <h3>Event A</h3>
              <div id="pl-bias-options-a"></div>
            </div>

            <div class="pl-two-config-column">
              <h3>Event B</h3>
              <div id="pl-bias-options-b"></div>
            </div>
          </div>

          <label>
            Relationship
            <select id="pl-relationship" class="input">
              <option value="independent">Independent</option>
              <option value="copy">B = A (linked)</option>
              <option value="complement">Coin complement</option>
            </select>
          </label>
        </div>

        <hr />

        <div class="row-between">
          <button id="pl-reset" class="button button-secondary" type="button">Reset</button>
          <button id="pl-step" class="button button-primary" type="button">Run</button>
        </div>

        <label>
          Run per click
          <input id="pl-step-size" class="input" type="number" min="1" step="1" value="100" />
        </label>

        <div class="row pl-step-buttons">
          <button id="pl-plus-1" class="button button-text" type="button">+1</button>
          <button id="pl-plus-10" class="button button-text" type="button">+10</button>
          <button id="pl-plus-100" class="button button-text" type="button">+100</button>
          <button id="pl-plus-1000" class="button button-text" type="button">+1000</button>
        </div>

        <div class="row-between pl-auto-row">
          <button id="pl-auto" class="button button-secondary" type="button">Start auto</button>
          <label class="pl-inline">
            Speed
            <input id="pl-speed" type="range" min="1" max="10" value="6" />
          </label>
        </div>
      </section>

      <section class="box card" id="pl-event-card">
        <h2>Event E</h2>
        <p class="pl-muted">Select outcomes in E to estimate <span class="pl-nowrap">P(E)</span>.</p>
        <div id="pl-event-outcomes"></div>
        <div class="pl-metrics">
          <div class="pl-metric">
            <div class="pl-metric-label">Estimated P(E)</div>
            <div id="pl-event-est" class="pl-metric-value">—</div>
          </div>
          <div class="pl-metric">
            <div class="pl-metric-label">Theoretical P(E)</div>
            <div id="pl-event-theory" class="pl-metric-value">—</div>
          </div>
        </div>
      </section>

      <section class="box card">
        <h2>Randomness</h2>
        <p class="pl-muted">Optional seed for reproducible trials.</p>
        <label>
          Seed
          <input id="pl-seed" class="input" type="text" placeholder="e.g., 42" />
        </label>
        <div class="row">
          <button id="pl-apply-seed" class="button button-secondary" type="button">Apply seed</button>
          <button id="pl-randomize-seed" class="button button-text" type="button">Randomize</button>
        </div>
      </section>
    </aside>

    <div class="content-area">
      <div class="pl-content">
        <div class="pl-top-grid">
          <section class="box card">
            <h2>Live Trial</h2>
            <div class="pl-live">
              <div id="pl-device-view" class="pl-device" aria-label="Trial device visualization"></div>
              <div class="pl-live-metrics" aria-live="polite">
                <div class="pl-live-metric">
                  <div class="pl-live-label">Trials</div>
                  <div id="pl-trials" class="pl-live-value">0</div>
                </div>
                <div class="pl-live-metric">
                  <div class="pl-live-label">Last outcome</div>
                  <div id="pl-last" class="pl-live-value">—</div>
                </div>
              </div>
            </div>
          </section>

          <section class="box card">
            <h2>Relative Frequency</h2>
            <canvas id="pl-bar-chart" class="pl-canvas" width="640" height="240" aria-label="Bar chart of relative frequencies"></canvas>
          </section>
        </div>

        <div class="pl-bottom-grid">
          <section class="box card" id="pl-convergence-card">
            <h2>Convergence</h2>
            <canvas id="pl-line-chart" class="pl-canvas" width="640" height="240" aria-label="Line chart of estimated probability over trials"></canvas>
          </section>

          <section class="box card" id="pl-frequency-card">
            <h2>Frequency Table</h2>
            <div class="pl-table-wrap">
              <table id="pl-frequency-table" class="pl-table"></table>
            </div>
          </section>
        </div>

        <div id="pl-two-view" hidden>
          <div class="pl-bottom-grid">
            <section class="box card">
              <h2>Joint Distribution</h2>
              <canvas id="pl-heatmap" class="pl-canvas" width="640" height="320" aria-label="Heatmap of joint relative frequencies"></canvas>
              <div id="pl-cell-summary" class="pl-cell-summary" aria-live="polite"></div>
            </section>

            <section class="box card">
              <h2>Two-way Table</h2>
              <div class="pl-table-wrap">
                <table id="pl-twoway-table" class="pl-table"></table>
              </div>
            </section>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Core Scripts -->
  <script type="module" src="./app.js"></script>
</body>
</html>
